let {users, movies} = require('../dataBase/data')const IMDb = require("imdb-light");const {v4: uuid} = require("uuid");module.exports = {    registration: (req, res, next) => {        const {user, passOne, passTwo} = req.body        if (!(user.length >= 4 && user.length <= 20)) return res.send({success: false, message: 'Check username'})        const isUser = (users.find(x => x.user === user))        if (!!isUser) return res.send({success: false, message: 'User exits'})        if (!(passOne.length >= 4 && passOne.length <= 20 && passOne === passTwo)) return res.send({            success: false,            message: 'Check passwords'        })        next()    },    checkUser: (req, res, next) => {        const {user, pass} = req.body        if (!(user.length >= 4 && user.length <= 20)) return res.send({success: false, message: 'Check username'})        if (!(pass.length >= 4 && pass.length <= 20)) return res.send({success: false, message: 'Check password'})        next()    },    fetchData: (req, res, next) => {        const {title, creator} = req.body        const user = users.find(x=> x.id === creator)        function fetch(id) {            return new Promise(function (resolve, reject) {                IMDb.fetch(id, (details) => {                    resolve(details);                });            });        }        async function test(id) {            const quote = await fetch(id);            return quote        }        test(title).then(res => {            const id = uuid()            const newMovie = {                title: res.Title,                year: res.Year,                rating: res.Rating,                genres: res.Genres,                writers: res.Writers,                poster: res.Poster,                id,                createdBy: user.user,                reviews: []            }            movies.unshift(newMovie)            next()        })    }}