let {users, movies, notifications} = require('../dataBase/data')const IMDb = require("imdb-light");const {v4: uuid} = require("uuid");module.exports = {    registration: (req, res, next) => {        const {user, passOne, passTwo} = req.body        if (!(user.length >= 4 && user.length <= 20)) return res.send({success: false, message: 'Check username'})        const isUser = (users.find(x => x.user === user))        if (!!isUser) return res.send({success: false, message: 'User exits'})        if (!(passOne.length >= 4 && passOne.length <= 20 && passOne === passTwo)) return res.send({            success: false,            message: 'Check passwords'        })        next()    },    checkUser: (req, res, next) => {        const {user, pass} = req.body        if (!(user.length >= 4 && user.length <= 20)) return res.send({success: false, message: 'Check username'})        if (!(pass.length >= 4 && pass.length <= 20)) return res.send({success: false, message: 'Check password'})        const isUser = users.find(x => x.user === user && x.password === pass)        if (!isUser) return res.send({success: false, message: "No such user"})        next()    },    fetchData: (req, res, next) => {        const {title, creator} = req.body        const user = users.find(x => x.id === creator)        function fetch(id) {            return new Promise(function (resolve) {                IMDb.fetch(id, (details) => {                    resolve(details);                });            });        }        async function test(id) {            const quote = await fetch(id);            return quote        }        test(title).then(res => {            const newMovie = {                title: res.Title,                year: res.Year,                rating: res.Rating,                genres: res.Genres,                writers: res.Writers,                poster: res.Poster,                id: uuid(),                createdBy: user.user,                reviews: [],            }            movies.unshift(newMovie)            next()        })    },    checkComments: (req, res, next) => {        const {movieId} = req.body        const movie = movies.find(x => x.id === movieId)        if (!(!!movie)) return res.send({success: false})        next()    },}